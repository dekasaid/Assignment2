<html>
    <head>
        <!--https://plnkr.co/edit/k9Jc5qEG0ckEovquEZi4?p=preview-->

        <title>Multi-Platform Interactions</title>
        <meta name="description" content="Multi-Platform Interactions">
        <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
       
        <!--js components-->
        <script src= "js/create-tree-component.js"></script>
        <script src= "js/delete-item-component.js"></script>
        <script src= "js/cursor-component.js"></script>
        <script src= "js/item-selection-component.js"></script>

        <!--some component scripts that run with the enviroment (one is for the a-frame enviroment and the other is events based on the hovering of the mouse)-->
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script src="https://rawgit.com/Ctrl-Alt-Zen/aframe-mobile-controls/master/components/twoway-motion/twoway-motion.js"></script>
    </head>
    <body>
       
        <a-scene>

            <!--assets-->
            <a-assets> 
                <img crossorigin="anonymous" id="treemap" src="/assets/textures/tree1.png">

                <a-asset-item crossorigin="anonymous" id="headphone-gltf" src="/assets/models/headphone_1.gltf"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="flower-obj" src="/assets/models/flower.obj"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="flower-mtl" src="/assets/models/flower.mtl"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="daisy-obj" src="/assets/models/flowers 3d OBJ.obj"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="daisy-mtl" src="/assets/models/flowers 3d OBJ.mtl"></a-asset-item>
                <a-asset-item crossorgin="anonymous" id="bench-obj" src="/assets/models/Bench OBJ.obj"></a-asset-item>
            </a-assets>
          
            <!--Have the cursor parented to the camera by having pointer lock enabled so whenever the mouse is moving, the cursor is located at the center of the screen (exit by pressing the esc key)-->
            <a-entity twoway-motion="speed: 35" camera look-controls="pointerLockEnabled: true" wasd-controls position="0 1.6 0">
                <a-entity cursor="fuse: true; fuseTimeout: 500"
                          position="0 0 -1"
                          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                          material="color: white; shader: flat">
                          
                </a-entity>
              </a-entity>
              
              
              
              <!--some entities-->

                <!--Have the cursor hover over the flower to display text-->
                <a-entity id="flower" 
                        cursor-listener 
                        position = "4 0.1 -4"
                        obj-model="obj: #flower-obj; mtl:#flower-mtl"
                        scale = "0.015 0.015 0.015"
                        event-set__enter="_event: mouseenter; _target: #flowerText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #flowerText; visible: false">
                        <a-text id="flowerText" value="This is a flower" color="white" visible="false" scale= "35 35 35" position="-32 59 2.8"></a-text></a-entity>

                <a-entity id="daisy"
                        crusor-listener
                        position = "-2.1 0 -6.3"
                        obj-model="obj: #daisy-obj; mtl:#daisy-mtl"
                        scale= "0.015 0.015 0.015"
                        event-set__enter="_event: mouseenter; _target: #daisyText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #daisyText; visible: false"
                       
                        event-set__2="_event: mouseenter"
                        event-set__3="_event: mouseleave"

                        animation__rotate="property: rotation; dir: forward ; dur: 10000; easing: easeInSine; loop: true; to: 0 360 0; startEvents: click"

                       >
                        <a-text id="daisyText" value="These are daisies" color="white" visible="false" scale= "35 35 35" position="-21 32 27"></a-text></a-entity>
                
                <a-entity id= "bench"
                        crusor-listener
                        position = "2.5 0 -11"
                        obj-model ="obj: #bench-obj"
                        rotation = "0 -21 0"
                        scale ="1.5 1.5 1.5"
                        cursor-component>
                        

                </a-entity>


              <a-entity id="headphone"
                        cursor-listener 
                        position="0.4 2 -9"
                        gltf-model="#headphone-gltf"
                        rotation= "0 90 0 "
                        scale= "0.4 0.4 0.4"
                        shadow="cast:true; receive:true;"
                        sound= "src: /assets/sounds/birdchirping.mp3; on: click; loop: true;"
              ></a-entity>
              <a-entity id="box" 
                        cursor-listener 
                        position = "-1.2 1.1 -7"
                        geometry="primitive: box"
                        material="color: gold"
                        event-set__enter="_event: mouseenter; _target: #boxText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #boxText; visible: false"
                       
                        cursor-component>
                    
                        <a-text id="boxText" value="This is a box" color="white" visible="false" position="-0.49 0.76 1"></a-text></a-entity>

          
                      <a-entity id="button" 
                      class="clickable"
                      position = "7.5 0 -10"
                      geometry="primitive: cylinder; radius: 0.5; height:0.1;"
                      shadow="receive:true;" material="color:#7BC8A4; sphericalEnvMap:#skymap; roughness:0.9; metalness:0.2;"
                      sound= "src: /assets/sounds/button_pressed.mp3; on: click"
                      create-tree-component ></a-entity>

                      <a-entity id="red_button" 
                      class="clickable"
                      position = "7.5 0 -14"
                      geometry="primitive: cylinder; radius: 0.5; height:0.1;"
                      shadow="receive:true;" material="color:red; sphericalEnvMap:#skymap; roughness:0.9; metalness:0.2;"
                      ></a-entity>
            
                <!-- have a sign displayed to remind user to hover here to create trees-->
                <a-entity id="sign" 
                      position = "7.5 1.4 -10"
                      rotation = "-180 90 0"
                      scale = "0.5 0.5 0.5"
                      geometry="primitive: triangle"
                      material="side: double; color: yellow;"
                      animation="property: position; from: 7.5 1.4 -10; to: 7.5 2.1 -10; dir: alternate; loop: true; dur: 2000; ease: linear">
                      <a-text id="treeText" value="Plant a tree!" rotation = "0 0 180" color="white" scale= "3 3 3 " position="1.8 -1.2 0"></a-text></a-entity>
                      
            <!--environment-->
            <a-entity environment="preset: forest; dressingAmount: 500"></a-entity>
 
        </a-scene>
    </body>
</html>