<html>
    <head>
        <!--https://plnkr.co/edit/k9Jc5qEG0ckEovquEZi4?p=preview-->

        <title>Multi-Platform Interactions</title>
        <meta name="description" content="Multi-Platform Interactions">
        <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
       
        <!--js components-->
        <script src= "js/create-tree-component.js"></script>
        <script src= "js/delete-item-component.js"></script>
        <script src= "js/color-change-component.js"></script>
        <script src= "js/item-selection-component.js"></script>
        <script src="js/create-flower-component.js"></script>
        <!--some component scripts that run with the enviroment (one is for the a-frame enviroment and the other is events based on the hovering of the mouse)-->
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script src="https://rawgit.com/Ctrl-Alt-Zen/aframe-mobile-controls/master/components/twoway-motion/twoway-motion.js"></script>
        
        
    </head>
    <body>
       
        <a-scene>

            <!--assets-->
            <a-assets> 
                <img crossorigin="anonymous" id="treemap" src="/assets/textures/tree1.png">

                <a-asset-item crossorigin="anonymous" id="headphone-gltf" src="/assets/models/headphone_1.gltf"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="flower-obj" src="/assets/models/flower.obj"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="flower-mtl" src="/assets/models/flower.mtl"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="daisy-obj" src="/assets/models/flowers 3d OBJ.obj"></a-asset-item>
                <a-asset-item crossorigin="anonymous" id="daisy-mtl" src="/assets/models/flowers 3d OBJ.mtl"></a-asset-item>
                <a-asset-item crossorgin="anonymous" id="bench-obj" src="/assets/models/Bench OBJ.obj"></a-asset-item>
                <a-asset-item crossorgin="anonymous" id="butterfly-obj" src="/assets/models/butterfly_yellow.obj"></a-asset-item>
                <a-asset-item crossorgin="anonymous" id="butterfly-obj" src="/assets/models/butterfly_yellow.obj"></a-asset-item>
                <a-asset-item crossorgin="anonymous" id="pinkFlower-obj" src="/assets/models/lotus_OBJ_high.obj"></a-asset-item>
              
            </a-assets>
          
            <!--Have the cursor parented to the camera by having pointer lock enabled so whenever the mouse is moving, the cursor is located at the center of the screen (exit by pressing the esc key)-->
            <a-entity twoway-motion="speed: 35" camera look-controls="pointerLockEnabled: true" wasd-controls position="0 1.6 0">
                <a-entity cursor="fuse: true; fuseTimeout: 500"
                          position="0 0 -1"
                          geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                          material="color: white; shader: flat"
                          >
                        
                </a-entity> 
              </a-entity>
              
              
              
              <!--some entities-->

                <!--Have the cursor hover over the flower to display text-->
                <a-entity id="flower" 
                        cursor-listener 
                        position = "4 0.1 -4"
                        obj-model="obj: #flower-obj; mtl:#flower-mtl"
                        scale = "0.015 0.015 0.015"
                        event-set__enter="_event: mouseenter; _target: #flowerText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #flowerText; visible: false"
                        animation="property: rotation; dir: forward; dur: 10000; easing: easeInSine; loop: true; to: 0 360 0; startEvents: mouseleave"
                   
                        item-selection-component>  
                        <a-text id="flowerText" value="This is a flower" color="white" visible="false" scale= "35 35 35" position="-32 59 2.8"></a-text></a-entity>


                <a-entity id="pinkflower" 
                        cursor-listener 
                        position = "1 1 1"
                        obj-model="obj: #pinkflower-obj"
                        scale = "0.015 0.015 0.015"></a-entity>


                <a-entity id="daisy"
                        cursor-listener
                        position = "-2.1 0 -6.3"
                        obj-model="obj: #daisy-obj; mtl:#daisy-mtl"
                        scale= "0.015 0.015 0.015"
                        shadow="cast: true"
                        event-set__enter="_event: mouseenter; _target: #daisyText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #daisyText; visible: false"
                        item-selection-component
                        >
                        <a-text id="daisyText" value="These are daisies" color="white" visible="false" scale= "35 35 35" position="-21 32 27"></a-text></a-entity>
        
            
                <a-entity id= "bench"
                        crusor-listener
                        position = "-5.3 -0.2 -7.3"
                        obj-model ="obj: #bench-obj"
                        rotation = "0 -111 0"
                        scale ="3.3 1.5 1.5"
                        color-change-component></a-entity>

               <a-entity id= "butterfly"
                        crusor-listener
                        position = "-4.98 0.6 -7"
                        obj-model ="obj: #butterfly-obj"
                        rotation = "0 90 3.2"
                        scale ="0.009 0.009 0.009"
                        event-set__enter="_event: mouseenter; _target: #butterflyText; visible: true"
                        event-set__leave="_event: mouseleave; _target: #butterflyText; visible: false"
                        color-change-component
                        item-selection-component>
                        
                        <a-text id="butterflyText" value="A butterfly" color="white" visible="false" scale= "35 35 35" position="-21 32 27"></a-text></a-entity>
                

              <a-entity id="headphone"
                        cursor-listener 
                        position="0.4 2 -9"
                        gltf-model="#headphone-gltf"
                        rotation= "0 90 0 "
                        scale= "0.4 0.4 0.4"
                        shadow="cast:true; receive:true;"
                        sound= "src: /assets/sounds/birdchirping.mp3; on: click; loop: true;"></a-entity>

            <a-entity id="greenbutton" 
                      class="clickable"
                      position = "3.1 0 -13"
                      geometry="primitive: cylinder; radius: 0.5; height:0.1;"
                      shadow="receive:true;" material="color:#7BC8A4; sphericalEnvMap:#skymap; roughness:0.9; metalness:0.2;"
                      sound= "src: /assets/sounds/button_pressed.mp3; on: click"
                      create-tree-component ></a-entity>

            <a-entity id="pinkbutton" 
                      class="clickable"
                      position = "7.5 0 -10"
                      geometry="primitive: cylinder; radius: 0.5; height:0.1;"
                      shadow="receive:true;" material="color:pink; sphericalEnvMap:#skymap; roughness:0.9; metalness:0.2;"
                      sound= "src: /assets/sounds/button_pressed.mp3; on: click"
                      create-flower-component ></a-entity>
            
                <!-- have a sign displayed to remind user to hover here to create trees-->
            <a-entity id="tree_sign" 
                      position = "3.1 1.4 -13"
                      rotation = "-180 180 0"
                      scale = "0.5 0.5 0.5"
                      geometry="primitive: triangle"
                      material="side: double; color: yellow;"
                      animation="property: position; from: 3.1 1.4 -13; to: 3.1 2.1 -13; dir: alternate; loop: true; dur: 2000; ease: linear">
                      <a-text id="treeText" value="Plant a tree!" rotation = "0 0 -180" color="white" scale= "3 3 3 " position="1.8 -1.2 0"></a-text></a-entity>
            
           <a-entity id="flower_sign" 
                      position = "7.5 1.4 -10"
                      rotation = "-180 90 0"
                      scale = "0.5 0.5 0.5"
                      geometry="primitive: triangle"
                      material="side: double; color: pink;"
                      animation="property: position; from: 7.5 1.4 -10; to: 7.5 2.1 -10; dir: alternate; loop: true; dur: 2000; ease: linear">
                      <a-text id="flowerText" value="Plant some flowers!" rotation = "0 0 180" color="white" scale= "3 3 3 " position="1.8 -1.2 0"></a-text></a-entity>
            
           
           
            <!--environment-->
            <a-entity environment="preset: forest; dressingAmount: 900"></a-entity>
 
        </a-scene>
    </body>
</html>